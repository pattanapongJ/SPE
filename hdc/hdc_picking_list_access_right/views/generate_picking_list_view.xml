<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="picking_list_form_inherit_access" model="ir.ui.view">
        <field name="name">picking.lists.form.inherit.access</field>
        <field name="model">picking.lists</field>
        <field name="inherit_id" ref="hdc_inventory_picking_list_sale.picking_list_form"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='sale_id']" position="after">
                <field name="access_right_value" invisible="1" />
            </xpath>

            <xpath expr="//tree/field[@name='location_id']" position="after">
                <field name="access_right_value" optional="hide" />
            </xpath>

            <xpath expr="//header/button[@name='action_auto_fill']" position="replace">
                <button name="action_auto_fill" type="object" string="Auto Fill" class="oe_highlight" attrs="{'invisible': ['|',('access_right_value', '=', 'confirm'),('state', 'not in', ['waiting_pick'])]}" />
            </xpath>

            <xpath expr="//header/button[@name='action_confirm']" position="replace">
                <button name="action_confirm" type="object" string="Confirmed" class="oe_highlight" attrs="{'invisible': ['|','|',('access_right_value', '=', False),('access_right_value', '=', 'validate'),('state', 'not in', ['draft'])]}" />
            </xpath>

            <xpath expr="//header/button[@name='action_validate']" position="replace">
                <button name="action_validate" states="waiting_pick" type="object" string="Validation" class="oe_highlight" attrs="{'invisible': ['|',('access_right_value', '=', 'confirm')]}" />
            </xpath>

            <xpath expr="//header/button[@name='action_cancel']" position="replace">
                <button name="action_cancel" type="object" string="Cancel" class="oe_highlight" attrs="{'invisible': ['|',('access_right_value', '=', False),('state', 'not in', ['draft', 'waiting_pick'])]}" />
            </xpath>

            <xpath expr="//field[@name='list_line_ids']" position="attributes">
                <attribute name="attrs">
                    {'readonly': [('access_right_value', '=', False)]}
                </attribute>
            </xpath>

            <xpath expr="//tree/field[@name='amount_arranged']" position="attributes">
                <attribute name="attrs">
                    {'readonly': ['|',('access_right_value', '=', False), ('access_right_value', '=', 'validate')]}
                </attribute>
           </xpath>

           <xpath expr="//tree/field[@name='qty_done']" position="attributes">
                <attribute name="attrs">
                    {'readonly': ['|',('access_right_value', '=', False), ('access_right_value', '=', 'confirm')]}
                </attribute>
            </xpath>

       </field>
   </record>

    <record id="picking_list_form_inherit_report" model="ir.ui.view">
        <field name="name">picking.lists.form.inherit.report</field>
        <field name="model">picking.lists</field>
        <field name="inherit_id" ref="hdc_inventory_picking_list_sale_report.picking_list_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//header/button[@name='print_pk_list']" position="replace">
                <button name="print_pk_list" string="Print" type="object" attrs="{'invisible': [('access_right_value', '=', False)]}" />      
            </xpath>
            <xpath expr="//field[@name='barcode_date']" position="after">
                <field name="warehouse_status" widget="badge" 
                    decoration-success="warehouse_status == 'done'" 
                    decoration-info="warehouse_status == 'warehouse'"
                    decoration-muted="warehouse_status == 'cancel'"/>
                <field name="confirm_picking_date" />
                <field name="user_confirm_picking" />
                <field name="inventory_status" readonly="1" widget="badge" 
                    decoration-warning="inventory_status == 'waiting'"
                    decoration-info="inventory_status == 'progress'"
                    decoration-success="inventory_status == 'done'"
                    decoration-muted="warehouse_status == 'cancel'"
                    />
                <field name="validation_picking_date" />
                <field name="user_validation_picking" />
            </xpath>
        </field>
    </record>

</odoo>