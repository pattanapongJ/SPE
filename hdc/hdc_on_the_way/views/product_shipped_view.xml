<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_product_shipped_tree" model="ir.ui.view">
            <field name="name">product shipped tree</field>
            <field name="model">stock.move</field>
            <field name="arch" type="xml">
                <tree string="Stock Batch Transfer"  create="0">
                    <field name="default_code" optional="show"/>
                    <field name="product_tmpl_id" optional="show" />
                    <field name="brand" optional="show"/>
                    <field name="qty_available" optional="show"/>
                    <field name="date" optional="show"/>
                    <field name="on_the_way" optional="show"/>
                    <field name="virtual_available" optional="show"/>
                    <field name="product_uom" optional="show"/>
                </tree>
            </field>
        </record>
        <record id="view_shipped_search" model="ir.ui.view">
            <field name="name">stock.move.shipped.search</field>
            <field name="model">stock.move</field>
            <field eval="3" name="priority"/>
            <field name="arch" type="xml">
                <search string="Stock Moves">
                    <field name="origin" filter_domain="['|', '|', ('origin', 'ilike', self), ('name', 'ilike', self), ('picking_id', 'ilike', self)]" string="Reference"/>
                    <field name="product_id"/>
                    <field name="partner_id" string="Partner" filter_domain="[('picking_id.partner_id', 'child_of', self)]"/>
                    <separator/>
                    <filter string="Date" name="today" date="date" help="Scheduled or processing date"/>
                    <group expand="0" string="Group By">
                        <filter string="Product" name="by_product" domain="[]"  context="{'group_by': 'product_id'}"/>
                        <filter string="Date Scheduled" name="groupby_date" domain="[]" context="{'group_by': 'date'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record id="product_shipped_action" model="ir.actions.act_window">
            <field name="name">Product Shipped</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="view_mode">tree</field>
            <field name="domain">['&amp;',('state', '=', 'assigned'),('on_the_way','>','0')]</field>
            <field name="view_id" ref="view_product_shipped_tree"/>
            <field name="search_view_id" ref="view_shipped_search"/>
        </record>
        
        <menuitem
        id="product_shipped_sale_menu"
        name="Product Shipped"
        action="product_shipped_action"
        parent="sale.product_menu_catalog"
        sequence="10"/>

        <menuitem
        id="product_shipped_purchase_menu"
        name="Product Shipped"
        action="product_shipped_action"
        parent="purchase.menu_purchase_products"
        sequence="50"/>

    </data>
</odoo>