<?xml version="1.0"?>
<odoo>
    <record id="view_inventory_adjustment_form_inherit" model="ir.ui.view">
        <field name="name">view.inventory.adjustment.form.inherit</field>
        <field name="model">stock.inventory</field>
        <field name="inherit_id" ref="stock.view_inventory_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header/button[@name='action_open_inventory_lines']" position="after">
                <button name="action_confirm_adjustment" type="object" string="Confirm Adjustment" class="btn-primary" 
                    attrs="{'invisible': [('btn_status', '!=', 'warehouse')]}"
                    groups="hdc_inventory_adj_confirm.group_warehouse_adj,hdc_inventory_adj_confirm.group_inventory_adj"
                />
            </xpath>
            <xpath expr="//field[@name='accounting_date']" position="after">
                <field name="btn_status" invisible="1"/>
                <field name="warehouse_status" widget="badge" 
                    decoration-success="warehouse_status == 'done'" 
                    decoration-info="warehouse_status == 'warehouse'"
                    decoration-muted="warehouse_status == 'cancel'"/>
                <field name="confirm_picking_date" />
                <field name="user_confirm_picking" />
                <field name="inventory_status" readonly="1" widget="badge" 
                    decoration-warning="inventory_status == 'waiting'"
                    decoration-info="inventory_status == 'progress'"
                    decoration-success="inventory_status == 'done'"
                    decoration-muted="warehouse_status == 'cancel'"
                    />
                <field name="validation_picking_date" />
                <field name="user_validation_picking" />
            </xpath>
            <xpath expr="//button[@name='action_validate'][1]" position="attributes">
                <attribute name="attrs" >
                    {'invisible': ['|','|',('inventory_status', '!=', 'progress'), ('state', '!=', 'confirm'), ('line_ids', '!=', [])]}
                </attribute>
                <attribute name="groups" >
                    hdc_inventory_adj_confirm.group_inventory_adj
                </attribute>
            </xpath>
            <xpath expr="//button[@name='action_validate'][2]" position="attributes">
                <attribute name="attrs" >
                    {'invisible':['|','|',('inventory_status', '!=', 'progress'), ('state', '!=', 'confirm'), ('line_ids', '=', [])]}
                </attribute>
                <attribute name="groups" >
                    hdc_inventory_adj_confirm.group_inventory_adj
                </attribute>
            </xpath>
        </field>
    </record>
    <template id="assets_backend" inherit_id="web.assets_backend" name="Inventory Button Control">
        <xpath expr="." position="inside">
            <script type="text/javascript" src="/hdc_inventory_adj_confirm/static/src/js/inventory_button_control.js"></script>
        </xpath>
    </template>



</odoo>
